<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.2.2 by Michael Rose
  Copyright 2017 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="ja" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Amazon Linux2(systemd)のプロセス数やファイルディスクリプタ数を変更する - そうなんでげす</title>




<meta name="description" content="今回はAmazon Linux から Amazon Linux2 への移行をする機会があったので、プロセス数やファイルディスクリプタ数といったリソース制限の変更に関して備忘録として残しておきます。">




<meta name="author" content="soudegesu">

<meta property="og:locale" content="ja_JP">
<meta property="og:site_name" content="そうなんでげす">
<meta property="og:title" content="Amazon Linux2(systemd)のプロセス数やファイルディスクリプタ数を変更する">


  <link rel="canonical" href="https://www.soudegesu.com/linux/systemd_limits/">
  <meta property="og:url" content="https://www.soudegesu.com/linux/systemd_limits/">



  <meta property="og:description" content="今回はAmazon Linux から Amazon Linux2 への移行をする機会があったので、プロセス数やファイルディスクリプタ数といったリソース制限の変更に関して備忘録として残しておきます。">



  <meta name="twitter:site" content="@alten_manten">
  <meta name="twitter:title" content="Amazon Linux2(systemd)のプロセス数やファイルディスクリプタ数を変更する">
  <meta name="twitter:description" content="今回はAmazon Linux から Amazon Linux2 への移行をする機会があったので、プロセス数やファイルディスクリプタ数といったリソース制限の変更に関して備忘録として残しておきます。">
  <meta name="twitter:url" content="https://www.soudegesu.com/linux/systemd_limits/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://www.soudegesu.com/assets/images/icon/linux_icon.png">
    
  

  
    <meta name="twitter:creator" content="@alten_manten">
  





  <meta property="og:image" content="https://www.soudegesu.com/assets/images/icon/linux_icon.png">



  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2018-06-10T00:00:00+09:00">






  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://www.soudegesu.com",
      "logo": "https://www.soudegesu.com/assets/images/soudegesu.jpg"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "soudegsu",
      "url" : "https://www.soudegesu.com",
      "sameAs" : null
    }
  </script>



  <meta name="google-site-verification" content="cTEFKilSiC4rSg768JEVSgidHaZ0Kq9fbgnqqOYW9Uw" />




<!-- end SEO -->


<link href="https://www.soudegesu.com/feed.xml" type="application/atom+xml" rel="alternate" title="そうなんでげす Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://www.soudegesu.com/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-5005266309965277",
    enable_page_level_ads: true
  });
</script>

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://www.soudegesu.com/">そうなんでげす</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item"><a href="https://www.soudegesu.com/archives/">Archives</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://www.soudegesu.com/tags/">Tags</a></li>
          
        </ul>
        <button><div class="navicon"></div></button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    



<div id="main" role="main">
  
  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="https://www.soudegesu.com/assets/images/soudegesu.jpg" class="author__avatar" alt="soudegesu" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <h3 class="author__name" itemprop="name">soudegesu</h3>
    
      <p class="author__bio" itemprop="description">
        Software Engineer
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> <span itemprop="name">Kawasaki, Japan</span>
        </li>
      

      

      

      

      
        <li>
          <a href="https://twitter.com/alten_manten" itemprop="sameAs">
            <i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/soudegesu" itemprop="sameAs">
            <i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fa fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Amazon Linux2(systemd)のプロセス数やファイルディスクリプタ数を変更する">
    <meta itemprop="description" content="今回はAmazon Linux から Amazon Linux2 への移行をする機会があったので、プロセス数やファイルディスクリプタ数といったリソース制限の変更に関して備忘録として残しておきます。">
    <meta itemprop="datePublished" content="June 10, 2018">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Amazon Linux2(systemd)のプロセス数やファイルディスクリプタ数を変更する
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  3 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p>今回はAmazon Linux から Amazon Linux2 への移行をする機会があったので、
プロセス数やファイルディスクリプタ数といったリソース制限の変更に関して備忘録として残しておきます。</p>

<p>なお、以降の手順は公式の Amazon Linux2 のAMIをそのままブートした後に試しています。</p>

<ul id="markdown-toc">
  <li><a href="#ソフトリミットとハードリミット" id="markdown-toc-ソフトリミットとハードリミット">ソフトリミットとハードリミット</a></li>
  <li><a href="#ログインユーザへの設定" id="markdown-toc-ログインユーザへの設定">ログインユーザへの設定</a>    <ul>
      <li><a href="#limitsconfを書き換える" id="markdown-toc-limitsconfを書き換える">limits.confを書き換える</a></li>
      <li><a href="#limitsconfよりも優先されるファイル" id="markdown-toc-limitsconfよりも優先されるファイル">limits.confよりも優先されるファイル</a></li>
      <li><a href="#設定値の確認方法" id="markdown-toc-設定値の確認方法">設定値の確認方法</a></li>
    </ul>
  </li>
  <li><a href="#デーモンへの設定" id="markdown-toc-デーモンへの設定">デーモンへの設定</a>    <ul>
      <li><a href="#全体へのデフォルト設定をする" id="markdown-toc-全体へのデフォルト設定をする">全体へのデフォルト設定をする</a></li>
      <li><a href="#デーモンごとの設定をする" id="markdown-toc-デーモンごとの設定をする">デーモンごとの設定をする</a></li>
    </ul>
  </li>
  <li><a href="#まとめ" id="markdown-toc-まとめ">まとめ</a></li>
  <li><a href="#参考にさせていただいたサイト" id="markdown-toc-参考にさせていただいたサイト">参考にさせていただいたサイト</a></li>
</ul>

<h2 id="ソフトリミットとハードリミット">ソフトリミットとハードリミット</h2>

<p>まず、最初によく聞くソフトリミットとハードリミットの確認しましょう。
Linuxではユーザやプロセスごとに利用できるリソースを制限することできます。</p>

<p>これらには <strong>ソフトリミット</strong> と <strong>ハードリミット</strong> の2種類が存在します。</p>

<p>ソフトリミットはユーザの現在の設定値を指し、ハードリミットはユーザ側での変更可能なソフトリミットの上限値を意味します。</p>

<h2 id="ログインユーザへの設定">ログインユーザへの設定</h2>

<h3 id="limitsconfを書き換える">limits.confを書き換える</h3>

<p>Linuxへのログインユーザへの設定は <code class="highlighter-rouge">/etc/security/limits.conf</code> ファイルにて設定がなされます。
なお、これはPAM認証が適用されたログインに限られます。</p>

<p>Ansibleの <a href="https://docs.ansible.com/ansible/2.3/pam_limits_module.html">pam_limits</a> を使うと、このファイルに追記がされます。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> /etc/security/limits.conf

<span class="c"># /etc/security/limits.conf</span>
<span class="c">#</span>
<span class="c">#This file sets the resource limits for the users logged in via PAM.</span>
<span class="c">#It does not affect resource limits of the system services.</span>
<span class="c">#</span>
<span class="c">#Also note that configuration files in /etc/security/limits.d directory,</span>
<span class="c">#which are read in alphabetical order, override the settings in this</span>
<span class="c">#file in case the domain is the same or more specific.</span>
<span class="c">#That means for example that setting a limit for wildcard domain here</span>
<span class="c">#can be overriden with a wildcard setting in a config file in the</span>
<span class="c">#subdirectory, but a user specific setting here can be overriden only</span>
<span class="c">#with a user specific setting in the subdirectory.</span>
<span class="c">#</span>
<span class="c">#Each line describes a limit for a user in the form:</span>
<span class="c">#</span>
<span class="c">#&lt;domain&gt;        &lt;type&gt;  &lt;item&gt;  &lt;value&gt;</span>
<span class="c">#</span>
<span class="c">#Where:</span>
<span class="c">#&lt;domain&gt; can be:</span>
<span class="c">#        - a user name</span>
<span class="c">#        - a group name, with @group syntax</span>
<span class="c">#        - the wildcard *, for default entry</span>
<span class="c">#        - the wildcard %, can be also used with %group syntax,</span>
<span class="c">#                 for maxlogin limit</span>
<span class="c">#</span>
<span class="c">#&lt;type&gt; can have the two values:</span>
<span class="c">#        - "soft" for enforcing the soft limits</span>
<span class="c">#        - "hard" for enforcing hard limits</span>
<span class="c">#</span>
<span class="c">#&lt;item&gt; can be one of the following:</span>
<span class="c">#        - core - limits the core file size (KB)</span>
<span class="c">#        - data - max data size (KB)</span>
<span class="c">#        - fsize - maximum filesize (KB)</span>
<span class="c">#        - memlock - max locked-in-memory address space (KB)</span>
<span class="c">#        - nofile - max number of open file descriptors</span>
<span class="c">#        - rss - max resident set size (KB)</span>
<span class="c">#        - stack - max stack size (KB)</span>
<span class="c">#        - cpu - max CPU time (MIN)</span>
<span class="c">#        - nproc - max number of processes</span>
<span class="c">#        - as - address space limit (KB)</span>
<span class="c">#        - maxlogins - max number of logins for this user</span>
<span class="c">#        - maxsyslogins - max number of logins on the system</span>
<span class="c">#        - priority - the priority to run user process with</span>
<span class="c">#        - locks - max number of file locks the user can hold</span>
<span class="c">#        - sigpending - max number of pending signals</span>
<span class="c">#        - msgqueue - max memory used by POSIX message queues (bytes)</span>
<span class="c">#        - nice - max nice priority allowed to raise to values: [-20, 19]</span>
<span class="c">#        - rtprio - max realtime priority</span>
<span class="c">#</span>
<span class="c">#&lt;domain&gt;      &lt;type&gt;  &lt;item&gt;         &lt;value&gt;</span>
<span class="c">#</span>

<span class="c">#*               soft    core            0</span>
<span class="c">#*               hard    rss             10000</span>
<span class="c">#@student        hard    nproc           20</span>
<span class="c">#@faculty        soft    nproc           20</span>
<span class="c">#@faculty        hard    nproc           50</span>
<span class="c">#ftp             hard    nproc           0</span>
<span class="c">#@student        -       maxlogins       4</span>

<span class="c"># End of file</span>
</code></pre></div></div>

<h3 id="limitsconfよりも優先されるファイル">limits.confよりも優先されるファイル</h3>

<p><code class="highlighter-rouge">/etc/security/limits.conf</code> のコメント内にも記載されていますが、 <code class="highlighter-rouge">/etc/security/limits.d</code> ディレクトリ内のファイルを読み取り、
デフォルト値として設定することができます。</p>

<p>Amazon Linux2（CentOS系）の場合には <code class="highlighter-rouge">/etc/security/limits.d/20-nproc.conf</code> がデフォルトで配備されており、
同ファイルにプロセスのソフトリミットがデフォルトで設定されていることがわかります。</p>

<p>アクシデンタルなフォーク爆弾を防ぐために、とも書かれていますね。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> /etc/security/limits.d/20-nproc.conf

<span class="o">&gt;</span> <span class="c"># Default limit for number of user's processes to prevent</span>
<span class="o">&gt;</span> <span class="c"># accidental fork bombs.</span>
<span class="o">&gt;</span> <span class="c"># See rhbz #432903 for reasoning.</span>
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="k">*</span>          soft    nproc     4096
<span class="o">&gt;</span> root       soft    nproc     unlimited
</code></pre></div></div>

<h3 id="設定値の確認方法">設定値の確認方法</h3>

<p>設定された項目は <code class="highlighter-rouge">ulimit -a</code> コマンドにて一覧表示して確認可能です。
<code class="highlighter-rouge">-H</code> オプションでハードリミット、 <code class="highlighter-rouge">-S</code> オプションでソフトリミットを確認できます。</p>

<p>注意点として、<code class="highlighter-rouge">ulimit</code> で表示されるのは、カレントユーザの設定値であることです。
別のユーザの設定値を確認したければ <code class="highlighter-rouge">su</code> を使うなどする必要があります。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ulimit</span> <span class="nt">-a</span>

<span class="o">&gt;</span> core file size          <span class="o">(</span>blocks, <span class="nt">-c</span><span class="o">)</span> 0
<span class="o">&gt;</span> data seg size           <span class="o">(</span>kbytes, <span class="nt">-d</span><span class="o">)</span> unlimited
<span class="o">&gt;</span> scheduling priority             <span class="o">(</span><span class="nt">-e</span><span class="o">)</span> 0
<span class="o">&gt;</span> file size               <span class="o">(</span>blocks, <span class="nt">-f</span><span class="o">)</span> unlimited
<span class="o">&gt;</span> pending signals                 <span class="o">(</span><span class="nt">-i</span><span class="o">)</span> 3828
<span class="o">&gt;</span> max locked memory       <span class="o">(</span>kbytes, <span class="nt">-l</span><span class="o">)</span> 64
<span class="o">&gt;</span> max memory size         <span class="o">(</span>kbytes, <span class="nt">-m</span><span class="o">)</span> unlimited
<span class="o">&gt;</span> open files                      <span class="o">(</span><span class="nt">-n</span><span class="o">)</span> 1024
<span class="o">&gt;</span> pipe size            <span class="o">(</span>512 bytes, <span class="nt">-p</span><span class="o">)</span> 8
<span class="o">&gt;</span> POSIX message queues     <span class="o">(</span>bytes, <span class="nt">-q</span><span class="o">)</span> 819200
<span class="o">&gt;</span> real-time priority              <span class="o">(</span><span class="nt">-r</span><span class="o">)</span> 0
<span class="o">&gt;</span> stack size              <span class="o">(</span>kbytes, <span class="nt">-s</span><span class="o">)</span> 8192
<span class="o">&gt;</span> cpu <span class="nb">time</span>               <span class="o">(</span>seconds, <span class="nt">-t</span><span class="o">)</span> unlimited
<span class="o">&gt;</span> max user processes              <span class="o">(</span><span class="nt">-u</span><span class="o">)</span> 3828
<span class="o">&gt;</span> virtual memory          <span class="o">(</span>kbytes, <span class="nt">-v</span><span class="o">)</span> unlimited
<span class="o">&gt;</span> file locks                      <span class="o">(</span><span class="nt">-x</span><span class="o">)</span> unlimited
</code></pre></div></div>

<h2 id="デーモンへの設定">デーモンへの設定</h2>

<p>次にサーバ上で動作させるデーモンプロセスのリソース制限をしましょう。</p>

<p><a href="https://wiki.archlinux.jp/index.php/Limits.conf">archlinuxのlimits.confのページ</a> を見ると興味深いことが書いてあります。</p>

<blockquote>
  <p>ノート: systemd を使っている場合 /etc/security/limits.conf の値は反映されません。/etc/systemd/system.conf, /etc/systemd/user.conf,/etc/systemd/<systemd_unit>/override.conf などを使ってリソースを制御することが可能です。詳しくは systemd-system.conf の man ページを見てください。</systemd_unit></p>
</blockquote>

<p>デーモンに対する設定においては、systemd場合、 <code class="highlighter-rouge">limits.conf</code> による設定はできないよ、ということです。</p>

<h3 id="全体へのデフォルト設定をする">全体へのデフォルト設定をする</h3>

<p>systemdにてコントロールされるプロセスのデフォルト値を変更するには <code class="highlighter-rouge">/etc/systemd/system.conf</code> ファイルを編集します。
例えば、プロセス数やファイルディスクリプタ数を変更するには以下のように記述をします。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>Manager]
<span class="nv">DefaultLimitNOFILE</span><span class="o">=</span>65536
<span class="nv">DefaultLimitNPROC</span><span class="o">=</span>65536
</code></pre></div></div>

<h3 id="デーモンごとの設定をする">デーモンごとの設定をする</h3>

<p>本来、サービスを運用するのであれば、サービスに対して適切なリソースを割り当てるのが好ましいでしょう。</p>

<p>その場合には <code class="highlighter-rouge">/etc/systemd/system/（サービス名）.service</code> ファイルを作成して、 <code class="highlighter-rouge">[Service]</code> ブロックに追加することができます。
なお、 <code class="highlighter-rouge">/etc/systemd/system/（サービス名）.service</code> が既に存在し、割当リソースだけ変更したいケースでは  <code class="highlighter-rouge">/etc/systemd/system/（サービス名）.service.d/override.conf</code> によって上書きするのがよいでしょう。
なお、設定値は <code class="highlighter-rouge">（サービス名）.service</code> の記述よりも <code class="highlighter-rouge">override.conf</code> が優先されます。</p>

<p>以下ではファイルディスクリプタの数を定義しています。</p>

<div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span>Service<span class="p">]</span>
LimitNOFILE<span class="p">=</span><span class="m">40000</span>
</code></pre></div></div>

<p>その後、デーモンを再起動して</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl daemon-reload

systemctl stop <span class="o">(</span>サービス<span class="o">)</span>
systemctl start <span class="o">(</span>サービス<span class="o">)</span>
</code></pre></div></div>

<p>設定が反映されているか確認しましょう。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> /proc/<span class="k">${</span><span class="p">プロセス番号</span><span class="k">}</span>/limits

Limit                     Soft Limit           Hard Limit           Units
Max cpu <span class="nb">time              </span>unlimited            unlimited            seconds
Max file size             unlimited            unlimited            bytes
Max data size             unlimited            unlimited            bytes
Max stack size            8388608              unlimited            bytes
Max core file size        0                    unlimited            bytes
Max resident <span class="nb">set          </span>unlimited            unlimited            bytes
Max processes             65536                65536                processes
Max open files            40000                40000                files
Max locked memory         65536                65536                bytes
Max address space         unlimited            unlimited            bytes
Max file locks            unlimited            unlimited            locks
Max pending signals       29779                29779                signals
Max msgqueue size         819200               819200               bytes
Max nice priority         0                    0
Max realtime priority     0                    0
Max realtime timeout      unlimited            unlimited            us
</code></pre></div></div>

<p>ファルディスクリプタ（Max open files）が40000になっていますね。</p>

<h2 id="まとめ">まとめ</h2>

<p>systemdでのリソース変更を行いました。
PAM認証でのユーザログインと、systemd上のデーモンプロセスでは設定の仕方が異なるので注意が必要です。</p>

<p>くれぐれも <code class="highlighter-rouge">ulimit</code> だけを変更して、 「Too many open files」 でアプリケーションが死亡しないように注意してくださいね！</p>

<h2 id="参考にさせていただいたサイト">参考にさせていただいたサイト</h2>
<ul>
  <li><a href="https://codezine.jp/article/detail/4836">ファイルディスクリプタについて</a></li>
  <li><a href="https://wiki.archlinux.jp/index.php/Limits.conf">limits.conf</a></li>
</ul>

<div align="center">
<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://rcm-fe.amazon-adsystem.com/e/cm?ref=qf_sp_asin_til&amp;t=soudegesu-22&amp;m=amazon&amp;o=9&amp;p=8&amp;l=as1&amp;IS2=1&amp;detail=1&amp;asins=4798044911&amp;linkId=ecbd4a37e5ba5b5255521397a806e73c&amp;bc1=ffffff&amp;lt1=_blank&amp;fc1=333333&amp;lc1=0066c0&amp;bg1=ffffff&amp;f=ifr">
</iframe>
<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://rcm-fe.amazon-adsystem.com/e/cm?ref=qf_sp_asin_til&amp;t=soudegesu-22&amp;m=amazon&amp;o=9&amp;p=8&amp;l=as1&amp;IS2=1&amp;detail=1&amp;asins=4797382686&amp;linkId=72348c4f427aaabd31a6e84ed1928825&amp;bc1=ffffff&amp;lt1=_blank&amp;fc1=333333&amp;lc1=0066c0&amp;bg1=ffffff&amp;f=ifr">
</iframe>
</div>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://www.soudegesu.com/tags/systemd" class="page__taxonomy-item" rel="tag">systemd</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://www.soudegesu.com/categories/linux" class="page__taxonomy-item" rel="tag">linux</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-06-10T00:00:00+09:00">June 10, 2018</time></p>
        
      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?via=alten_manten&text=Amazon Linux2(systemd)のプロセス数やファイルディスクリプタ数を変更する https://www.soudegesu.com/linux/systemd_limits/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer.php?u=https://www.soudegesu.com/linux/systemd_limits/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://www.soudegesu.com/linux/systemd_limits/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.soudegesu.com/linux/systemd_limits/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>

  <a href="http://b.hatena.ne.jp/append?https://www.soudegesu.com/linux/systemd_limits/" class="btn btn--hatebu" title="Share on Bookmark"><i class="fa fa-fw fa-hatebu" aria-hidden="true"></i><span> Bookmark</span></a>

</section>


    </div>

    
  <nav class="pagination">
    
      <a href="https://www.soudegesu.com/linux/systemd_clock/" class="pagination--pager" title="Amazon Linux2(systemd)のシステム時刻を変更する
">Previous</a>
    
    
      <a href="https://www.soudegesu.com/python/pyplot-api/" class="pagination--pager" title="matplotlibのpyplot APIをいろいろ試す
">Next</a>
    
  </nav>


    
      <div class="page__comments">
  
  
    <h4 class="page__comments-title">Comments</h4>
    <section id="disqus_thread"></section>
  
</div>

    

  </article>
  
  
  <div class="page__related">
    <h2 class="page__related-title">関連記事</h2>
    
    
    

    <div class="grid__wrapper">
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        

          



<div class="list__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://www.soudegesu.com/linux/systemd_clock/" rel="permalink">Amazon Linux2(systemd)のシステム時刻を変更する
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">今回はAmazon Linux から Amazon Linux2 への移行をする機会があったので、
システム時刻の変更に関して備忘録として残しておきます。

</p>
  </article>
</div>

          
          
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
        
        
  
        
      
    </div>      
  </div>
  

  

</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
    
      <li><a href="https://twitter.com/alten_manten"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/soudegesu"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://www.soudegesu.com/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    <li><a href="/sitemap/"><i class="fa fa-fw fa-sitemap" aria-hidden="true"></i> Sitemap</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 soudegsu. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="https://www.soudegesu.com/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92599175-1', 'auto');
  ga('send', 'pageview');
</script>






  
  <script type="text/javascript">
  	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  	var disqus_shortname = 'soudegesu';

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function() {
  		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  	})();

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function () {
  		var s = document.createElement('script'); s.async = true;
  		s.type = 'text/javascript';
  		s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  		(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  	}());
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>






  </body>
</html>
