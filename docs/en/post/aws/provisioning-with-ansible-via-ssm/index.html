<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Provisioning a edge device in a private network with Ansible via AWS Session Manager - Sou-Nan-De-Gesu</title><script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script><meta name=description content="Since SSH is not available for devices in a private network, provisioning using SSH is not an easy task. In this post, I will show you how to run the Ansible Playbook using Session Manager in AWS System Manager."><meta property="og:title" content="Provisioning a edge device in a private network with Ansible via AWS Session Manager"><meta property="og:description" content="Since SSH is not available for devices in a private network, provisioning using SSH is not an easy task. In this post, I will show you how to run the Ansible Playbook using Session Manager in AWS System Manager."><meta property="og:type" content="article"><meta property="og:url" content="https://www.soudegesu.com/en/post/aws/provisioning-with-ansible-via-ssm/"><meta property="article:published_time" content="2021-01-08T15:12:06+09:00"><meta property="article:modified_time" content="2021-01-08T15:12:06+09:00"><meta property="og:site_name" content="Sou-Nan-De-Gesu"><meta itemprop=name content="Provisioning a edge device in a private network with Ansible via AWS Session Manager"><meta itemprop=description content="Since SSH is not available for devices in a private network, provisioning using SSH is not an easy task. In this post, I will show you how to run the Ansible Playbook using Session Manager in AWS System Manager."><meta itemprop=datePublished content="2021-01-08T15:12:06+09:00"><meta itemprop=dateModified content="2021-01-08T15:12:06+09:00"><meta itemprop=wordCount content="739"><meta itemprop=keywords content="aws,ssm,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Provisioning a edge device in a private network with Ansible via AWS Session Manager"><meta name=twitter:description content="Since SSH is not available for devices in a private network, provisioning using SSH is not an easy task. In this post, I will show you how to run the Ansible Playbook using Session Manager in AWS System Manager."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','G-S6WHJPSK6V','auto');ga('send','pageview');}</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-5005266309965277",enable_page_level_ads:true});</script><script async src=https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js custom-element=amp-auto-ads></script><amp-auto-ads type=adsense data-ad-client=ca-pub-5005266309965277></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/en title=Sou-Nan-De-Gesu rel=home><div class="logo__item logo__text"><div class=logo__title>Sou-Nan-De-Gesu</div><div class=logo__tagline>Once again, I cut a worthless object</div></div></a></div><nav class=menu><ul class=menu__list><li class="menu__item menu__link">Language</li><li class="menu__item menu__item--active"><a class=menu__link href=#>English</a></li><li class=menu__item><a class=menu__link href=https://www.soudegesu.com/post/aws/provisioning-with-ansible-via-ssm/>日本語</a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Provisioning a edge device in a private network with Ansible via AWS Session Manager</h1><div class="post__meta meta"><svg class="icon icon-time" width="16" height="14" viewBox="0 0 16 16"><path d="m8-3e-7c-4.4.0-8 3.6-8 8C0 12.4 3.6 16 8 16s8-3.6 8-8.0000003c0-4.4-3.6-8-8-8zM8 14.4c-3.52.0-6.4-2.88-6.4-6.4000003.0-3.52 2.88-6.4 6.4-6.4s6.4 2.88 6.4 6.4C14.4 11.52 11.52 14.4 8 14.4zm.4-10.4000003H7.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg><time class="post__meta-date meta-date" datetime=2021-01-08T15:12:06>January 08, 2021</time>
<span class="post__meta-categories meta-categories"><svg class="icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta-categories__list><a class=meta-categories__link href=/en/categories/aws rel=category>aws</a></span></span></div></header><figure class="post__thumbnail thumbnail"><img class=thumbnail__image src=/images/icons/ssm_icon.png alt="Provisioning a edge device in a private network with Ansible via AWS Session Manager"></figure><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#device-provisioning-in-a-private-network>Device provisioning in a private network</a></li><li><a href=#environment>Environment</a></li><li><a href=#setup-procedure>Setup procedure</a><ul><li><a href=#configuring-aws-system-manager-session-manager>Configuring AWS System Manager Session Manager</a></li><li><a href=#open-a-port-forwarding-session-in-aws-session-manager>Open a port forwarding session in AWS Session Manager</a></li><li><a href=#create-an-ansible-playbook-file-and-run-it>Create an Ansible Playbook file and run it</a></li></ul></li><li><a href=#why-port-forwarding>Why port forwarding?</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class="content post__content clearfix"><p>In this article, I will show you how to access devices in a private network in a remote location to manage the device configuration by AWS System Manager Session Manager and Ansible.</p><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-5005266309965277 data-ad-slot=7057233336></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><h2 id=device-provisioning-in-a-private-network>Device provisioning in a private network</h2><p>I would like to run a configuration management script from my development machine at home on a remotely located device. The image is as follows.</p><p><img src=/images/20210108/purpose.drawio.png alt=purpose></p><p>In most cases, the remotely located devices are probably in a private network, so it is not that easy to run Ansible.</p><p>We can consider using AWS Greengrass for simple module updates to edge devices, but it is not suitable for serious configuration management, so we will look for a way to run Ansible.</p><h2 id=environment>Environment</h2><ul><li>PC in my home<ul><li>Mac Book Pro (Mac OS X <code>10.15.7</code>)</li><li>Ansible <code>2.9.9</code></li><li>AWS CLI <code>2.1.16</code></li><li><a href=https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html#install-plugin-macos>AWS Session Manager Plugin</a></li></ul></li><li>Devices in remote location<ul><li>Jetson AGX Xavier (JetPack <code>4.4</code>)</li><li><a href=https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/session-manager.html>AWS Systems Manager Session Manager</a></li></ul></li></ul><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-5005266309965277 data-ad-slot=7057233336></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><h2 id=setup-procedure>Setup procedure</h2><h3 id=configuring-aws-system-manager-session-manager>Configuring AWS System Manager Session Manager</h3><p>The first step is to configure the <a href=https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/session-manager.html>AWS System Manager Session Manager</a> settings.</p><p><a href=https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/session-manager.html>AWS System Manager Session Manager</a> is often used as a replacement for a stepping server, but it can be used not only to access virtual servers (EC2), but can also be configured to put up sessions to on-premises servers. This means that if the AWS-provided module supports the OS distribution, it can be installed on edge devices as well.</p><p>Refer to the <a href=https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/session-manager.html>official documentation</a> for the setup procedure. It's very well written.</p><p>I'll just give you a rough outline of the process.</p><ol><li>Create an IAM Instance Profile that will be attached to the Device (the host where Ansible will run)</li><li>Configure the System Manager.</li><li>Install the <a href=https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html#install-plugin-macos>AWS Session Manager Plugin</a> on your PC (local machine).</li><li>Install the AWS Session Manager modules on the Device (the host where Ansible will run) and register the device to System Manager as a on-premise instance.</li></ol><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-5005266309965277 data-ad-slot=7057233336></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><h3 id=open-a-port-forwarding-session-in-aws-session-manager>Open a port forwarding session in AWS Session Manager</h3><p>Execute the following command on your PC to enable port forwarding from your PC to the device via Session Manager. The <code>--target</code> option should be the Instance ID of the device registered in Session Manager.
And set forwarding the <code>9090</code> port on the your PC to the <code>22</code> port on the device.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>aws ssm start-session <span style=color:#ae81ff>\
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#ae81ff></span> --target mi-xxxxxxxx <span style=color:#ae81ff>\
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#ae81ff></span> --document-name AWS-StartPortForwardingSession <span style=color:#ae81ff>\
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#ae81ff></span> --parameters <span style=color:#e6db74>&#39;{&#34;portNumber&#34;:[&#34;22&#34;],&#34;localPortNumber&#34;:[&#34;9090&#34;]}&#39;</span></code></pre></div><h3 id=create-an-ansible-playbook-file-and-run-it>Create an Ansible Playbook file and run it</h3><p>The next step is to create a set of Ansible Playbook files. The content of the tasks can be anything you want.
The important thing here is how you specify the inventory.
We have set the provisioning target to the <code>9090</code> port on <code>localhost</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#f92672>[</span>jetson<span style=color:#f92672>]</span>
<span style=display:block;width:100%;background-color:#3c3d38><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>localhost
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#f92672>[</span>jetson:vars<span style=color:#f92672>]</span>
<span style=display:block;width:100%;background-color:#3c3d38><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>ansible_port<span style=color:#f92672>=</span><span style=color:#ae81ff>9090</span>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>ansible_user<span style=color:#f92672>=</span>XXXXXXX
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span>ansible_ssh_pass<span style=color:#f92672>=</span>XXXXXX
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span>ansible_become_password<span style=color:#f92672>=</span>XXXXXX
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span>ansible_python_interpreter<span style=color:#f92672>=</span>/usr/bin/python3</code></pre></div><p>You can run the <code>ansible-playbook</code> command from your PC to the device via port forwarding.</p><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-5005266309965277 data-ad-slot=7057233336></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><h2 id=why-port-forwarding>Why port forwarding?</h2><p>This section explains why you should open a port forwarding session first.</p><p><a href=https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/session-manager-getting-started-enable-ssh-connections.html>AWS Session Manager</a> document introduces the configuration of <code>~/.ssh/config</code> by <code>ProxyCommand</code>.</p><p>This setting is very useful because it allows you to specify an Instance ID for SSH login, such as <code>ssh user@mi-xxxxxxx</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>Host i-_ mi-_
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>ProxyCommand sh -c <span style=color:#e6db74>&#34;aws ssm start-session \
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#e6db74> --target %h \
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#e6db74> --document-name AWS-StartSSHSession \
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span style=color:#e6db74> --parameters &#39;portNumber=%p&#39;&#34;</span></code></pre></div><p>However, the <code>AWS-StartSSHSession</code> specified here will only open a new session (Local Machine -> Session Manager -> Device) every time it is called. <strong>The session or session-worker will remain to maintain the SSH connection until you explicitly call aws ssm terminate-session or the session idle times out</strong>.</p><p>For example, with the <code>ProxyCommand</code> setting in place, if you specify the connection host by Instance ID, a <code>Connection reset by peer</code> error will occur in the middle of execution for relatively long Ansible tasks.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#f92672>[</span>jetson<span style=color:#f92672>]</span>
<span style=display:block;width:100%;background-color:#3c3d38><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>mi-xxxxxxxx
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#f92672>[</span>jetson:vars<span style=color:#f92672>]</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>ansible_user<span style=color:#f92672>=</span>XXXXXXX
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>ansible_ssh_pass<span style=color:#f92672>=</span>XXXXXX
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span>ansible_become_password<span style=color:#f92672>=</span>XXXXXX
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span>ansible_python_interpreter<span style=color:#f92672>=</span>/usr/bin/python3</code></pre></div><p>If you check the <code>/var/log/amazon/ssm/errors.log</code> file on the Ansible host, you can see that <code>too many open files</code> is output. You can also see that the number of <code>sshd</code> processes on the Ansible host is increasing while Ansible is running.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>ERROR <span style=color:#f92672>[</span>NewFileWatcherChannel @ filechannel.go.79<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>ssm-session-worker<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>xxxxxxx-07679fe2fa5825aa8<span style=color:#f92672>]</span> <span style=color:#ae81ff>\
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#ae81ff></span>filewatcher listener encountered error when start watcher: too many open files
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>ERROR <span style=color:#f92672>[</span>createFileChannelAndExecutePlugin @ main.go.105<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>ssm-session-worker<span style=color:#f92672>]</span> <span style=color:#ae81ff>\
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#ae81ff></span><span style=color:#f92672>[</span>xxxxxxx-07679fe2fa5825aa8<span style=color:#f92672>]</span> failed to create channel: too many open files
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>ERROR <span style=color:#f92672>[</span>handleSSHDPortError @ port.go.292<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>ssm-session-worker<span style=color:#f92672>]</span> <span style=color:#ae81ff>\
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span style=color:#ae81ff></span><span style=color:#f92672>[</span>xxxxxxx-0590c3ea63794d55f<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>DataBackend<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>pluginName<span style=color:#f92672>=</span>Port<span style=color:#f92672>]</span> <span style=color:#ae81ff>\
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span style=color:#ae81ff></span>Failed to read from port: read tcp 127.0.0.1:41294-&gt;127.0.0.1:22: use of closed network connection</code></pre></div><h2 id=conclusion>Conclusion</h2><p>When you run Ansible commands via Session Manager, you should open a port forwarding session and then run them against localhost.</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="icon icon-tag" width="16" height="16" viewBox="0 0 16 16"><path d="M16 9.5c0 .373-.24.74-.5 1l-5 5c-.275.26-.634.5-1 .5-.373.0-.74-.24-1-.5L1 8a2.853 2.853.0 01-.7-1C.113 6.55.0 5.973.0 5.6V1.4C0 1.034.134.669.401.401.67.134 1.034.0 1.4.0h4.2c.373.0.95.113 1.4.3s.732.432 1 .7l7.5 7.502c.26.274.5.632.5.998zM3.5 5a1.5 1.5.0 100-3 1.5 1.5.0 000 3z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/en/tags/aws/ rel=tag>aws</a></li><li class=tags__item><a class="tags__link btn" href=/en/tags/ssm/ rel=tag>ssm</a></li></ul></div></footer></article><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-5005266309965277 data-ad-slot=8973386323 data-ad-format=rectangle data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></main><h3>関連記事</h3><div class=list__item><figure class=list__thumbnail><a href=https://www.soudegesu.com/en/aws/amazonlinux2-docker/><img src=/images/icons/ec2_icon.png alt="Install Docker to Amazon Linux2"></a></figure><div class="list__content clearfix"><header class=list__header><h4 class="list__title post__title"><a href=/en/aws/amazonlinux2-docker/ rel=bookmark>Install Docker to Amazon Linux2</a></h4><div class="list__meta meta"><svg class="icon icon-time" width="16" height="14" viewBox="0 0 16 16"><path d="m8-3e-7c-4.4.0-8 3.6-8 8C0 12.4 3.6 16 8 16s8-3.6 8-8.0000003c0-4.4-3.6-8-8-8zM8 14.4c-3.52.0-6.4-2.88-6.4-6.4000003.0-3.52 2.88-6.4 6.4-6.4s6.4 2.88 6.4 6.4C14.4 11.52 11.52 14.4 8 14.4zm.4-10.4000003H7.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg><time class="post__meta-date meta-date" datetime=2018-07-10T00:00:00>July 10, 2018</time>
<span class="post__meta-categories meta-categories"><svg class="icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta-categories__list><a class=meta-categories__link href=/en/categories/aws rel=category>aws</a></span></span></div></header></div></div><div class=list__item><figure class=list__thumbnail><a href=https://www.soudegesu.com/en/aws/rds-aurora-cluster-partitioning-procedure/><img src=/images/icons/rds_icon.png alt="Add partitions periodically in AWS RDS Aurora Cluster (MySQL compatible) with the SQL Procedures"></a></figure><div class="list__content clearfix"><header class=list__header><h4 class="list__title post__title"><a href=/en/aws/rds-aurora-cluster-partitioning-procedure/ rel=bookmark>Add partitions periodically in AWS RDS Aurora Cluster (MySQL compatible) with the SQL Procedures</a></h4><div class="list__meta meta"><svg class="icon icon-time" width="16" height="14" viewBox="0 0 16 16"><path d="m8-3e-7c-4.4.0-8 3.6-8 8C0 12.4 3.6 16 8 16s8-3.6 8-8.0000003c0-4.4-3.6-8-8-8zM8 14.4c-3.52.0-6.4-2.88-6.4-6.4000003.0-3.52 2.88-6.4 6.4-6.4s6.4 2.88 6.4 6.4C14.4 11.52 11.52 14.4 8 14.4zm.4-10.4000003H7.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg><time class="post__meta-date meta-date" datetime=2018-02-19T00:00:00>February 19, 2018</time>
<span class="post__meta-categories meta-categories"><svg class="icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta-categories__list><a class=meta-categories__link href=/en/categories/aws rel=category>aws</a></span></span></div></header></div></div><div class=list__item><figure class=list__thumbnail><a href=https://www.soudegesu.com/en/aws/validate-certification-manager/><img src=/images/icons/acm_icon.png alt="It's better to use DNS verification for verification of SSL certificate issued by AWS Certification Manager"></a></figure><div class="list__content clearfix"><header class=list__header><h4 class="list__title post__title"><a href=/en/aws/validate-certification-manager/ rel=bookmark>It's better to use DNS verification for verification of SSL certificate issued by AWS Certification Manager</a></h4><div class="list__meta meta"><svg class="icon icon-time" width="16" height="14" viewBox="0 0 16 16"><path d="m8-3e-7c-4.4.0-8 3.6-8 8C0 12.4 3.6 16 8 16s8-3.6 8-8.0000003c0-4.4-3.6-8-8-8zM8 14.4c-3.52.0-6.4-2.88-6.4-6.4000003.0-3.52 2.88-6.4 6.4-6.4s6.4 2.88 6.4 6.4C14.4 11.52 11.52 14.4 8 14.4zm.4-10.4000003H7.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg><time class="post__meta-date meta-date" datetime=2018-01-31T00:00:00>January 31, 2018</time>
<span class="post__meta-categories meta-categories"><svg class="icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta-categories__list><a class=meta-categories__link href=/en/categories/aws rel=category>aws</a></span></span></div></header></div></div><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="soudegesu avatar" src=/images/soudegesu.jpg class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>About soudegesu</span></div><div class=authorbox__description>Software Engineer</div></div><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/en/post/python/selenium-element-selector/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Selecting a specific element in Selenium</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/en/post/javascript/recoil-context/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>React child component can't get the atom value in Recoil</p></a></div></nav><section class=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"soudegesu"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div><aside class=sidebar><div class="widget-search widget"><form class=widget-search__form role=search method=get action=https://google.com/search><label><input class=widget-search__field type=search placeholder=SEARCH… name=q aria-label=SEARCH…></label>
<input class=widget-search__submit type=submit value=Search>
<input type=hidden name=sitesearch value=https://www.soudegesu.com></form></div><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/en/post/aws/access-iot-data-with-cognito-identity/>Error 403 when accessing AWS IoT device shadow with Cognito authenticated user Identity</a></li><li class=widget__item><a class=widget__link href=/en/post/swift/keyboard-shortcut-with-button-style-on-osx/>Enabling keyboard shortcuts for buttons with buttonStyle applied in SwiftUI</a></li><li class=widget__item><a class=widget__link href=/en/post/docker/prometheus-on-kubernates/>Building a Prometheus, Grafana and pushgateway cluster with Kubernates</a></li><li class=widget__item><a class=widget__link href=/en/post/javascript/recoil-context/>React child component can't get the atom value in Recoil</a></li><li class=widget__item><a class=widget__link href=/en/post/aws/provisioning-with-ansible-via-ssm/>Provisioning a edge device in a private network with Ansible via AWS Session Manager</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/en/categories/anaconda/>anaconda</a></li><li class=widget__item><a class=widget__link href=/en/categories/aws/>aws</a></li><li class=widget__item><a class=widget__link href=/en/categories/docker/>docker</a></li><li class=widget__item><a class=widget__link href=/en/categories/docker-compose/>docker-compose</a></li><li class=widget__item><a class=widget__link href=/en/categories/javascript/>javascript</a></li><li class=widget__item><a class=widget__link href=/en/categories/linux/>linux</a></li><li class=widget__item><a class=widget__link href=/en/categories/mysql/>mysql</a></li><li class=widget__item><a class=widget__link href=/en/categories/pyenv/>pyenv</a></li><li class=widget__item><a class=widget__link href=/en/categories/python/>python</a></li><li class=widget__item><a class=widget__link href=/en/categories/swift/>swift</a></li></ul></div></div><div class="widget-social widget"><h4 class="widget-social__title widget__title">Social</h4><div class="widget-social__content widget__content"><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=Twitter rel="noopener noreferrer" href=https://twitter.com/alten_manten target=_blank><svg class="widget-social__link-icon icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5.0-78.8 35.3-78.8 78.8.0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3-6.7 11.6-10.6 25.2-10.6 39.6.0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1.0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4.0-12.6-.4-18.8-1.1 34.9 22.4 76.3 35.4 120.8 35.4 144.9.0 224.1-120 224.1-224.1.0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg><span>Twitter</span></a></div><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=GitHub rel="noopener noreferrer" href=https://github.com/soudegesu target=_blank><svg class="widget-social__link-icon icon icon-github" width="24" height="24" viewBox="0 0 384 374"><path d="m192 0C85.9.0.0 85.8.0 191.7c0 84.7 55 156.6 131.3 181.9 9.6 1.8 13.1-4.2 13.1-9.2.0-4.6-.2-16.6-.3-32.6-53.4 11.6-64.7-25.7-64.7-25.7-8.7-22.1-21.3-28-21.3-28-17.4-11.9 1.3-11.6 1.3-11.6 19.3 1.4 29.4 19.8 29.4 19.8 17.1 29.3 44.9 20.8 55.9 15.9 1.7-12.4 6.7-20.8 12.2-25.6-42.6-4.8-87.5-21.3-87.5-94.8.0-20.9 7.5-38 19.8-51.4-2-4.9-8.6-24.3 1.9-50.7.0.0 16.1-5.2 52.8 19.7 15.3-4.2 31.7-6.4 48.1-6.5 16.3.1 32.7 2.2 48.1 6.5 36.7-24.8 52.8-19.7 52.8-19.7 10.5 26.4 3.9 45.9 1.9 50.7 12.3 13.4 19.7 30.5 19.7 51.4.0 73.7-44.9 89.9-87.7 94.6 6.9 5.9 13 17.6 13 35.5.0 25.6-.2 46.3-.2 52.6.0 5.1 3.5 11.1 13.2 9.2 76.2-25.5 131.2-97.3 131.2-182 0-105.9-86-191.7-192-191.7z"/></svg><span>GitHub</span></a></div></div><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-5005266309965277 data-ad-slot=1661016284 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="widget-taglist widget"><h4 class=widget__title>Tags</h4><div class=widget__content><a class="widget-taglist__link widget__link btn" href=/en/tags/acm/ title=acm>acm</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/amazonlinux/ title=amazonlinux>amazonlinux</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/anaconda/ title=anaconda>anaconda</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/ansible/ title=ansible>ansible</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/aurora/ title=aurora>aurora</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/aws/ title=aws>aws</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/colaboratory/ title=colaboratory>colaboratory</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/docker/ title=docker>docker</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/ec2/ title=ec2>ec2</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/excel/ title=excel>excel</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/grafana/ title=grafana>grafana</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/iot/ title=iot>iot</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/javascript/ title=javascript>javascript</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/kubernates/ title=kubernates>kubernates</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/machine-learning/ title=machine-learning>machine-learning</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/mysql/ title=MySQL>MySQL</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/openpyxl/ title=openpyxl>openpyxl</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/osx/ title=osx>osx</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/packer/ title=packer>packer</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/pandas/ title=pandas>pandas</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/pdf/ title=pdf>pdf</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/prometheus/ title=prometheus>prometheus</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/pushgateway/ title=pushgateway>pushgateway</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/pyenv/ title=pyenv>pyenv</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/pyenv-virtualenv/ title=pyenv-virtualenv>pyenv-virtualenv</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/pypdf2/ title=pypdf2>pypdf2</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/python/ title=python>python</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/rds/ title=rds>rds</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/react/ title=react>react</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/recoil/ title=recoil>recoil</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/route53/ title=route53>route53</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/selenium/ title=selenium>selenium</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/sql/ title=SQL>SQL</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/ssl/ title=ssl>ssl</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/ssm/ title=ssm>ssm</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/swift/ title=swift>swift</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/swiftui/ title=swiftUI>swiftUI</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/systemd/ title=systemd>systemd</a>
<a class="widget-taglist__link widget__link btn" href=/en/tags/tensorflow/ title=tensorflow>tensorflow</a></div><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-5005266309965277 data-ad-slot=2162982695 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2022 Sou-Nan-De-Gesu.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel="shortcut icon" href=/favicon.ico></div><script async defer src=/js/menu.js></script></body></html>