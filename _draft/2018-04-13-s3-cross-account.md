---
title: "クロスアカウントで共有されたバケットはAWSコンソール上から閲覧可能なのか"
description: "S3はバケットポリシーを設定することで、クロスアカウントでのバケット共有ができます。両アカウントからバケットに対して操作を行うことができるため、大変便利な機能です。バケットのオーナーアカウントではAWSコンソール上でバケットを確認できるのですが、共有された側ではS3バケットのコンソールにバケットが表示されません。なんとかして閲覧する方法はないものかと試行錯誤してみました。"
date: 2018-04-13 00:00:00 +0900
categories: aws
tags: aws s3
---

AWS S3はバケットポリシーを設定することで、クロスアカウントでのバケット共有ができます。
設定により、複数のアカウントからバケットに対して操作を行うことができるため、大変便利な機能です。
しかし、バケットのオーナーアカウントではAWSコンソール上でバケットを確認できるのですが、
共有された側ではS3バケットのコンソールにバケットが表示されません。
今回はなんとかして閲覧する方法はないものかと試行錯誤してみました。

* Table Of Contents
{:toc}

## S3をファイルストレージサービス的に使えるか

今回やろうとしていたことを簡単に説明します。
以下の図にまとめました。

![share_bucket]({{site.baseurl}}/assets/images/20180413/share_bucket.png)

既に本番環境で稼働しているサービスがあり(アカウントA)、
アカウントA内にあるS3バケットにストアしているデータを他部門に提供する必要が出てきました。
アカウントA自体が社内のセキュリティレベルが高めに規定されているため、他部門のIAM UserをアカウントAの中に作るのが難しく、簡易な方法を模索していました。
そこで選択肢の1つとして他部門向けのAWSアカウントBを作成し、アカウントBに対して対象のバケットのみを共有するようにすれば要求が充足されるのではないか、という風に考えたのがことの発端です。

## [非公式]どうしてもブラウザで頑張って見る

## [正攻法]Switch Roleを使う


## まとめ

